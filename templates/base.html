<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Gesti√≥n Negocios{% endblock %}</title>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Bootstrap Icons (solo una vez) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <!-- Bootstrap CSS (solo una vez) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    body{
      background: linear-gradient(135deg, #f0f4ff, #d9e4ff);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color:#212529; min-height:100vh; margin:0; display:flex;
      animation: fadeIn 1s ease forwards;
    }
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}

    .sidebar{
      width:220px; background:#343a40; color:white; padding:2rem 1rem;
      position:fixed; top:0; bottom:0; left:0;
    }
    .sidebar h4{ text-align:center; font-weight:bold; margin-bottom:2rem; color:#fff; letter-spacing:1px; }
    .sidebar a{ color:#adb5bd; display:block; padding:.5rem 1rem; text-decoration:none; margin-bottom:.5rem; border-radius:6px; transition:background .3s; }
    .sidebar a:hover{ background:#495057; color:#fff; }

    .main-content{ margin-left:220px; padding:2rem 1.5rem; width:100%; }

    .container{ max-width:1100px; background:white; padding:30px 40px; border-radius:15px;
      box-shadow:0 20px 40px rgba(53,122,189,.15); margin-bottom:40px; animation:slideUpFade .6s ease forwards; }
    @keyframes slideUpFade{from{opacity:0; transform:translateY(30px)} to{opacity:1; transform:translateY(0)}}

    .btn-primary,.btn-secondary{ border-radius:30px; font-weight:600; padding:10px 26px; box-shadow:0 8px 18px rgba(53,122,189,.28); transition:.3s; }
    .btn-primary:hover{ background:#2f5fc1; box-shadow:0 14px 30px rgba(53,122,189,.45); }
    .btn-secondary:hover{ background:#5a7bcf; box-shadow:0 14px 30px rgba(53,122,189,.45); color:#fff; }

    form label{ font-weight:600; color:#254e9b; }
    form input, form textarea, form select{ border-radius:10px; border:1.8px solid #a1c0ff; padding:10px 15px; font-size:1.05rem; transition:border-color .3s; }
    form input:focus, form textarea:focus, form select:focus{ border-color:#357abd; box-shadow:0 0 8px #357abdaa; outline:none; }

    /* Asegurar que los modales se muestren sobre todo */
    .modal { z-index: 1080; }
    .modal-backdrop { z-index: 1070; }
  </style>

  {% block head %}{% endblock %}
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h4>Atreus</h4>

    <a class="nav-link" href="{{ url_for('dashboard_view') }}">üìä Dashboard</a>


    <a href="{{ url_for('inicio') }}"><i class="bi bi-house"></i> Negocios</a>

    {% if session.get('user_role') != 'asistente' %}
      <a href="{{ url_for('conectividad') }}"><i class="bi bi-wifi"></i> Conectividad</a>

      <a class="nav-link" href="{{ url_for('clientes_lista') }}">
        <i class="bi bi-people"></i> Clientes
      </a>
    {% endif %}

    {% if session.get('user_role') == 'admin' %}
      <a href="{{ url_for('panel_admin') }}"><i class="bi bi-shield-lock-fill"></i> Panel Admin</a>
    {% endif %}
    {% if session.get('user_role') == 'admin' %}
      <a href="{{ url_for('admin_grupos') }}"><i class="bi bi-people-fill"></i> Grupos</a>
    {% endif %}



    <hr>
    <a href="{{ url_for('perfil') }}"><i class="bi bi-person"></i> Perfil</a>
    <a href="{{ url_for('logout') }}"><i class="bi bi-box-arrow-right"></i> Salir</a>
  </div>

  <!-- Contenido principal -->
  <div class="main-content">
    <div class="container mt-2">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      {% block content %}{% endblock %}
    </div>
  </div>

  <!-- Bootstrap Bundle (solo una vez y antes de scripts de p√°gina) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  {# Los modales se inyectan aqu√≠, fuera de .container, para evitar problemas de backdrop/transform #}
  {% block modals %}{% endblock %}

  {# Scripts espec√≠ficos de cada p√°gina (se ejecutan despu√©s de que el DOM y los modales existen) #}
  {% block scripts %}{% endblock %}
</body>
</html>
